다양한 리퀘스트를 보내고 리스폰스를 받아보았습니다. 원하는 내용을 서버로 보낼 때는 바디에 담아 전달했었어요. 그리고 추가로, 리퀘스트 자체에 대한 정보를 함께 전달하기 위해 URL 아래쪽에 `Content-Type`과 같은 값을 작성해서 보낸 적도 있었습니다.

```
POST http://localhost:3000/
Content-Type: application/json

...

```

이렇게 리퀘스트에 포함되는 정보가 바로 "헤더(Header)"입니다.

# 헤더란?

![리퀘스트 헤더](https://bakey-api.codeit.kr/api/files/resource?root=static&seqId=13910&version=1&directory=/hzzjfwdzf-%E1%84%92%E1%85%A6%E1%84%83%E1%85%A5_%E1%84%89%E1%85%A1%E1%86%AF%E1%84%91%E1%85%A7%E1%84%87%E1%85%A9%E1%84%80%E1%85%B5.001.jpeg&name=hzzjfwdzf-%E1%84%92%E1%85%A6%E1%84%83%E1%85%A5_%E1%84%89%E1%85%A1%E1%86%AF%E1%84%91%E1%85%A7%E1%84%87%E1%85%A9%E1%84%80%E1%85%B5.001.jpeg)

헤더는 클라이언트가 서버로 요청을 보낼 때, 요청 자체에 대한 부가적인 정보를 전달하는 역할을 합니다. 예를 들어, 클라이언트 브라우저의 정보(`User-Agent`)나 리퀘스트 바디의 데이터 형식(`Content-Type`), 인증 토큰(`Authorization`) 등이 포함될 수 있어요. 이러한 정보를 바탕으로 서버는 클라이언트의 요청을 적절히 처리할 수 있게 되죠.

앞에서 설명한, 클라이언트가 서버로 리퀘스트를 보낼 때 함께 전송하는 헤더를 "리퀘스트 헤더"라고 하고요. 그에 대한 응답으로 서버가 클라이언트에게 리스폰스를 보낼 때 포함하는 헤더를 "리스폰스 헤더"라고 합니다.

![리퀘스트 헤더와 리스폰스 헤더](https://bakey-api.codeit.kr/api/files/resource?root=static&seqId=13910&version=1&directory=/agujptpr6-%E1%84%92%E1%85%A6%E1%84%83%E1%85%A5_%E1%84%89%E1%85%A1%E1%86%AF%E1%84%91%E1%85%A7%E1%84%87%E1%85%A9%E1%84%80%E1%85%B5.002.jpeg&name=agujptpr6-%E1%84%92%E1%85%A6%E1%84%83%E1%85%A5_%E1%84%89%E1%85%A1%E1%86%AF%E1%84%91%E1%85%A7%E1%84%87%E1%85%A9%E1%84%80%E1%85%B5.002.jpeg)

리퀘스트를 보내서 받은 리스폰스의 위쪽에서도 리퀘스트를 보낼 때와 비슷하게 이러한 헤더를 확인할 수 있어요.

```
HTTP/1.1 201 Created
X-Powered-By: Express
Content-Type: application/json
...

```

웹 개발을 하다 보면 서버에서 클라이언트가 보낸 헤더의 값을 활용하거나, 서버에서 헤더를 통해 클라이언트로 정보를 전달해야 할 때가 있는데요.

Express에서는 리퀘스트 헤더에서 값을 어떻게 가져올 수 있는지, 그리고 리스폰스 헤더에 값은 어떻게 설정할 수 있는지 알아봅시다.

## 리퀘스트 헤더

리퀘스트 헤더는 리퀘스트 객체의 `headers`라는 속성에서 확인할 수 있습니다. 클라이언트가 리퀘스트를 보낼 때 설정한 값들이 들어있죠.

`req.headers`

브라우저에서 보낸 리퀘스트 헤더의 내용을 살펴보면 다양한 헤더가 있는 것을 볼 수 있어요.

```json
{
  host: 'localhost:3000',
  connection: 'keep-alive',
  // ...
  'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36',
  accept: 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7',
  // ...
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'ko,en-AU;q=0.9,en;q=0.8'
}

```

만약 특정 헤더의 값을 확인하고 싶다면, 다음과 같이 `get()` 메소드에 파라미터로 헤더의 키를 넘겨주면 됩니다.

```js
res.get('X-Powered-By') // => Express
```

## 리스폰스 헤더

리스폰스 헤더는 서버가 보낼 리스폰스의 헤더를 가리킵니다. 클라이언트가 받을 리스폰스의 헤더를 가리키는 것이기 때문에 Express나 개발자가 설정한 헤더이죠.

리퀘스트 헤더와는 다르게 Express에서는 공식적으로 모든 리스폰스 헤더를 조회하는 방법을 제공하지 않습니다. 다만, Node.js의 HTTP 리스폰스 객체를 기반으로 만들어져 있기 때문에, Node.js에서 제공하는 메소드인 `res.getHeaders()`를 사용할 수 있어요.

```js
res.getHeaders()
```

개별로는 리퀘스트 헤더와 동일하게 리스폰스 객체의 `get()` 메소드로 확인 가능해요.

```js
res.get('X-Powered-By') // => Express
```

리퀘스트 헤더와는 다르게 리스폰스는 서버 개발자가 만들어서 클라이언트에 제공해야하는 것이기 때문에, `set()` 메소드로 특정 헤더를 설정할 수 있습니다.
```js
res.set('X-Custom-Header', 'custom-value');
```

## 리스폰스 헤더 주의 사항

리스폰스 헤더 설정 시에는 주의할 점이 몇 가지 있습니다.

1. `res.set()`으로 동일한 헤더를 설정하면 마지막 값만 반영됩니다.
    
    ```js
    res.setHeader('color', 'red');
	res.get('color'); // red
	res.setHeader('color', 'blue');
	res.get('color'); // blue
	```
    
    예를 들어, 처음에 `color`라는 헤더에 `red`를 넣었더라도, 나중에 `blue`로 다시 설정하면 결국 `blue`만 남게 돼요. 마치 변수처럼, 마지막에 지정한 값이 최종적으로 적용되는 거죠.
    
2. 헤더는 대소문자를 구분하지 않습니다.
    
    사람이 읽기 쉽게 하기 위해 첫 글자나 하이픈(`-`) 뒤의 첫 알파벳을 대문자로 쓰는 경우가 많지만, HTTP 헤더는 기본적으로 대소문자를 구분하지 않기 때문에 `content-type`과 `Content-Type`은 동일한 헤더로 인식돼요.