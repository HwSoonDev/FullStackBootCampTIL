
super struct 라이브러리를 이용

**유효성 검사 객체**를 만들어서,
post, patch 리퀘스트의 유효성을 검사해준다.

### 문법
superstruct 메서드
```
import * as s from 'superstruct';

s.object() // 유효성 검사 객체
s.partial() // 검사 객체 중 일부만 검사하는 객체
s.enums() // 필드 검사 조건에 사용하는 일부 일치 여부 enum

s.string()
s.number()
s.min()
s.max()

s.define() //새로운 타입을 정의 예) 양수만 허용하는 숫자 타입
s.refine() //기존 타입에 조건을 붙임 예) 숫자 타입이면서 0 이상

...
```

define()
```js
import { define } from 'superstruct'

const Positive = define('Positive', value => {
  return typeof value === 'number' && value > 0
})
```

refine()
```js
import { number, refine } from 'superstruct'

const NonNegative = refine(number(), 'NonNegative', value => value >= 0)

```
### 사용 예시

struct.js
```js
const Category = s.enums([
'FASHION', 
'SPORTS', 
'ELECTRONICS', 
'HOME_INTERIOR', 
'HOUSEHOLD_SUPPLIES', 
'KITCHENWARE'
]);

//post 리퀘스트를 검사하는 객체
export const CreateProduct = s.object({
  name: s.size(s.string(), 1, 60),
  description: s.string(),
  category: Category,
  price: s.min(s.number(), 0),
  stock: s.min(s.number(), 0),
});

//patch 리퀘스트를 검사하는 객체
export const PatchProduct = s.partial(CreateUser);
```

app.js
```js
app.post('/products', async (req, res) => {
  assert(req.body, CreateProduct) //바디 유효성 검사
  const product = await prisma.product.create({
    data: req.body,
  });
  res.status(201).send(product);
});

app.patch('/products/:id', async (req, res) => {
  assert(req.body, PatchProduct) //바디 유효성 검사
  const { id } = req.params;
  const product = await prisma.product.update({
    where: { id },
    data: req.body,
  });
  res.send(product);
});
```